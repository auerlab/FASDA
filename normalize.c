/***************************************************************************
 *  Description:
 *      Compute normalized abundances from raw counts provided in a TSV file
 *      similar to Kallisto abundances.tsv.  The TSV can be generated by
 *      the abundance subcommand from alignment data if necessary.
 *
 *      MRN: https://scienceparkstudygroup.github.io/research-data-management-lesson/median_of_ratios_manual_normalization/index.html
 *
 *  Arguments:
 *
 *  Returns:
 *
 *  History: 
 *  Date        Name        Modification
 *  2022-05-04  Jason Bacon Begin
 ***************************************************************************/

#include <stdio.h>
#include <sysexits.h>
#include <stdlib.h>
#include <xtend/dsv.h>
#include "normalize.h"

int     main(int argc,char *argv[])

{
    dsv_line_t  dsv_line;
    
    switch(argc)
    {
	case 1:
	    break;
	
	default:
	    usage(argv);
    }
    
    dsv_line_init(&dsv_line);
    while ( dsv_line_read(&dsv_line, stdin, "\t") != EOF )
    {
	// Dummy output: Just echo non-normalized counts to test UI
	printf("%s\t%s\n", DSV_LINE_FIELDS_AE(&dsv_line, 0),
		DSV_LINE_FIELDS_AE(&dsv_line, 3));
    }
    return EX_OK;
}


void    usage(char *argv[])

{
    fprintf(stderr, "Usage: %s\n", argv[0]);
    exit(EX_USAGE);
}
